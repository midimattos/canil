<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#6C5CE7">
    <meta name="description" content="Ferramenta de previs√£o de ninhadas para Spitz Alem√£o An√£o">
    <title>Spitz Genetic Predictor</title>
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 192 192'><rect fill='%236C5CE7' width='192' height='192'/><text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle' font-size='120' fill='white' font-weight='bold'>üêï</text></svg>">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 192 192'><rect fill='%236C5CE7' width='192' height='192'/><text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle' font-size='120' fill='white' font-weight='bold'>üêï</text></svg>">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1 class="title">üêï Spitz Genetic Predictor</h1>
            <p class="subtitle">Ferramenta de previs√£o de ninhadas para Spitz Alem√£o An√£o</p>
        </header>

        <!-- Navigation Tabs -->
        <nav class="tabs">
            <button class="tab-btn active" data-tab="kennel">Meu Canil</button>
            <button class="tab-btn" data-tab="dogs">Simular Cruzamento</button>
            <button class="tab-btn" data-tab="results">Resultados</button>
            <button class="tab-btn" data-tab="reference">Refer√™ncia</button>
        </nav>

        <!-- Main Content -->
        <main class="content">
            <!-- Tab 0: Kennel Management -->
            <section id="kennel" class="tab-content active">
                <div class="kennel-container">
                    <h2>üè† Meu Canil</h2>
                    
                    <div class="kennel-actions">
                        <button class="btn-primary" onclick="toggleRegisterDog()">‚ûï Registrar Novo C√£o</button>
                    </div>

                    <!-- Register Dog Form -->
                    <div id="registerDogForm" class="register-form" style="display: none;">
                        <h3>Registrar Novo C√£o</h3>
                        <form id="newDogForm">
                            <div class="form-group">
                                <label for="dogName">Nome do C√£o:</label>
                                <input type="text" id="dogName" required placeholder="Ex: Rex">
                            </div>

                            <div class="form-group">
                                <label for="dogSex">Sexo:</label>
                                <select id="dogSex" required>
                                    <option value="">Selecione...</option>
                                    <option value="M">Macho ‚ôÇ</option>
                                    <option value="F">F√™mea ‚ôÄ</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="dogCoat">Pelagem:</label>
                                <select id="dogCoat" required>
                                    <option value="">Selecione...</option>
                                    <option value="curta">Curta (Padr√£o)</option>
                                    <option value="longa">Longa / Abundante</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="dogBaseColor">Colora√ß√£o Base:</label>
                                <select id="dogBaseColor" required onchange="updateDogMaskVisibility(); updateDogIntensityLabel()">
                                    <option value="">Selecione...</option>
                                    <option value="preto">Preto</option>
                                    <option value="chocolate">Chocolate</option>
                                    <option value="laranja">Laranja / Vermelho</option>
                                    <option value="creme">Creme</option>
                                    <option value="branco">Branco</option>
                                    <option value="wolf_sable">Wolf Sable (Agouti)</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="dogDilution">Dilui√ß√£o:</label>
                                <select id="dogDilution" required>
                                    <option value="">Selecione...</option>
                                    <option value="densa">Densa (N√£o dilu√≠do)</option>
                                    <option value="diluida">Dilu√≠da (Azul / Lilac)</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="dogMarking">Marca√ß√£o:</label>
                                <select id="dogMarking" required>
                                    <option value="">Selecione...</option>
                                    <option value="solido">S√≥lido</option>
                                    <option value="sable">Sable</option>
                                    <option value="tan_points">Tan Points</option>
                                    <option value="particolor">Particolor (Piebald)</option>
                                    <option value="irlandesa">Mancha Irlandesa</option>
                                    <option value="branco_extremo">Branco Extremo</option>
                                </select>
                            </div>

                            <div class="form-group" id="dogMaskGroup" style="display: none;">
                                <label for="dogMask">M√°scara:</label>
                                <select id="dogMask">
                                    <option value="">Selecione...</option>
                                    <option value="sem_mascara">Sem M√°scara</option>
                                    <option value="mascara_negra">Com M√°scara Negra</option>
                                </select>
                            </div>

                            <div class="form-group" id="dogIntensityGroup">
                                <label for="dogIntensity">Intensidade:</label>
                                <select id="dogIntensity" required>
                                    <option value="">Selecione...</option>
                                    <option value="vermelho_intenso">Vermelho Intenso</option>
                                    <option value="laranja_padrao">Laranja Padr√£o</option>
                                    <option value="creme_branco">Creme / Branco</option>
                                </select>
                                <div class="field-hint" id="dogIntensityHint" style="display: none;">
                                    ‚ÑπÔ∏è A intensidade est√° oculta pela cor base, mas informe a cor dos pais ou ancestrais para maior precis√£o nos portadores.
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="dogMerle">Marmoreio:</label>
                                <select id="dogMerle" required>
                                    <option value="">Selecione...</option>
                                    <option value="nao">Sem Merle (S√≥lido)</option>
                                    <option value="merle">Merle Padr√£o</option>
                                    <option value="harlequin">Harlequin Merle</option>
                                    <option value="oculto">Merle Oculto / Cripto</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="dogNose">Trufagem:</label>
                                <select id="dogNose" required>
                                    <option value="">Selecione...</option>
                                    <option value="preta">Preta</option>
                                    <option value="marrom">Marrom</option>
                                    <option value="azul">Azul (Cinza)</option>
                                    <option value="lilas_beaver">Lil√°s / Beaver</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="dogTicking">Pigmenta√ß√£o:</label>
                                <select id="dogTicking" required>
                                    <option value="">Selecione...</option>
                                    <option value="sem_pintas">Sem Pintas</option>
                                    <option value="com_pintas">Com Pintas / Sardas</option>
                                </select>
                            </div>

                            <hr style="margin: 1.5rem 0; border: none; border-top: 2px solid var(--border-color);">

                            <h4 style="margin-bottom: 1rem; color: var(--primary-color);">üë®‚Äçüë©‚Äçüëß √Årvore Geneal√≥gica (Opcional)</h4>

                            <div class="form-group">
                                <label for="dogFather">Pai do C√£o:</label>
                                <select id="dogFather">
                                    <option value="">Selecione um c√£o registrado...</option>
                                </select>
                                <small style="color: var(--text-light); margin-top: 0.3rem; display: block;">Apenas machos registrados aparecer√£o aqui</small>
                            </div>

                            <div class="form-group">
                                <label for="dogMother">M√£e do C√£o:</label>
                                <select id="dogMother">
                                    <option value="">Selecione uma c√£o registrada...</option>
                                </select>
                                <small style="color: var(--text-light); margin-top: 0.3rem; display: block;">Apenas f√™meas registradas aparecer√£o aqui</small>
                            </div>

                            <div class="form-actions">
                                <button type="submit" class="btn-primary">‚úì Registrar C√£o</button>
                                <button type="button" class="btn-reset" onclick="toggleRegisterDog()">‚úï Cancelar</button>
                            </div>
                        </form>
                    </div>

                    <!-- Kennel Dogs List -->
                    <div id="kennelList" class="kennel-list">
                        <p class="placeholder">Nenhum c√£o registrado ainda. Clique em "Registrar Novo C√£o" para come√ßar!</p>
                    </div>
                </div>
            </section>

            <!-- Tab 1: Dogs Simulation -->
            <section id="dogs" class="tab-content">
                <div class="simulation-setup">
                    <h2>üß¨ Simular Cruzamento</h2>
                    
                    <div class="two-column">
                        <!-- Father Selection -->
                        <div class="dog-card">
                            <h3>üîµ Selecionar C√£o Pai</h3>
                            <div class="form-group">
                                <label for="selectedFather">Escolha um macho:</label>
                                <select id="selectedFather" required onchange="updateFatherInfo()">
                                    <option value="">Selecione um macho...</option>
                                </select>
                            </div>
                            <div id="fatherInfo" class="dog-info" style="display: none;"></div>
                        </div>

                        <!-- Mother Selection -->
                        <div class="dog-card">
                            <h3>üî¥ Selecionar C√£o M√£e</h3>
                            <div class="form-group">
                                <label for="selectedMother">Escolha uma f√™mea:</label>
                                <select id="selectedMother" required onchange="updateMotherInfo()">
                                    <option value="">Selecione uma f√™mea...</option>
                                </select>
                            </div>
                            <div id="motherInfo" class="dog-info" style="display: none;"></div>
                        </div>
                    </div>

                    <!-- Simulation Settings -->
                    <div class="simulation-settings">
                        <h3>‚öôÔ∏è Configura√ß√£o da Simula√ß√£o</h3>
                        
                        <div class="form-group">
                            <label for="litterSize">Tamanho da Ninhada:</label>
                            <input type="number" id="litterSize" min="1" max="100" value="20">
                        </div>

                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="showGenotype" checked>
                                Mostrar Gen√≥tipo (Alelos)
                            </label>
                        </div>

                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="showHealthAlerts" checked>
                                Mostrar Alertas de Sa√∫de
                            </label>
                        </div>

                        <div class="info-box">
                            <h3>‚ö†Ô∏è Informa√ß√µes Importantes</h3>
                            <ul>
                                <li>Este simulador usa modelos gen√©ticos conhecidos para a ra√ßa Spitz Alem√£o An√£o</li>
                                <li>A √°rvore geneal√≥gica √© analisada para detectar genes recessivos escondidos</li>
                                <li>Resultados s√£o estimativas baseadas em heran√ßa mendeliana</li>
                                <li>Consulte um geneticista canino para cruzamentos cr√≠ticos</li>
                            </ul>
                        </div>

                        <button id="simulateBtn" class="btn-primary" onclick="validateAndSimulate()">‚ñ∂ Simular Cruzamento</button>
                    </div>
                </div>
            </section>

            <!-- Tab 2: Results -->
            <section id="results" class="tab-content">
                <div id="resultsContainer" class="results-container">
                    <p class="placeholder">Resultados aparecer√£o aqui ap√≥s a simula√ß√£o</p>
                </div>
            </section>

            <!-- Tab 3: Reference -->
            <section id="reference" class="tab-content">
                <div class="reference-container">
                    <h2>üìö Guia de Refer√™ncia Gen√©tica</h2>
                    
                    <div class="reference-section">
                        <h3>Como Funciona a Heran√ßa de Genes Recessivos</h3>
                        <p><strong>A Regra dos 50%:</strong> O c√£o herda exatamente uma carta (alelo) de cada pai.</p>
                        <ul>
                            <li><strong>Pais:</strong> 50% de chance de passar um gene espec√≠fico</li>
                            <li><strong>Av√≥s:</strong> 25% de chance de um gene chegar ao neto</li>
                            <li><strong>Bisav√≥s:</strong> 12,5% de chance</li>
                        </ul>
                        <p style="margin-top: 1rem; padding: 1rem; background: rgba(108, 92, 231, 0.1); border-radius: 6px;">
                            <strong>Exemplo:</strong> Um c√£o preto pode ser portador de chocolate (Bb) se um av√≥ dele era chocolate. Visualmente parece preto puro, mas carrega o gene recessivo no DNA.
                        </p>
                    </div>

                    <div class="reference-section">
                        <h3>Genes Recessivos que Viajam Escondidos</h3>
                        <table style="width: 100%; border-collapse: collapse;">
                            <tr style="background: var(--bg-color);">
                                <th style="padding: 0.75rem; border: 1px solid var(--border-color); text-align: left;">Caracter√≠stica</th>
                                <th style="padding: 0.75rem; border: 1px solid var(--border-color); text-align: left;">Se na √Årvore...</th>
                                <th style="padding: 0.75rem; border: 1px solid var(--border-color); text-align: left;">O Neto Pode Ser...</th>
                            </tr>
                            <tr>
                                <td style="padding: 0.75rem; border: 1px solid var(--border-color);">Chocolate</td>
                                <td style="padding: 0.75rem; border: 1px solid var(--border-color);">Pai/M√£e/Av√≥ Chocolate</td>
                                <td style="padding: 0.75rem; border: 1px solid var(--border-color);">Portador de Chocolate (Bb)</td>
                            </tr>
                            <tr style="background: rgba(108, 92, 231, 0.02);">
                                <td style="padding: 0.75rem; border: 1px solid var(--border-color);">Dilui√ß√£o (Azul)</td>
                                <td style="padding: 0.75rem; border: 1px solid var(--border-color);">Ancestral Azul/Beaver</td>
                                <td style="padding: 0.75rem; border: 1px solid var(--border-color);">Portador de Dilui√ß√£o (Dd)</td>
                            </tr>
                            <tr>
                                <td style="padding: 0.75rem; border: 1px solid var(--border-color);">Creme/Branco</td>
                                <td style="padding: 0.75rem; border: 1px solid var(--border-color);">Ancestral Branco/Creme</td>
                                <td style="padding: 0.75rem; border: 1px solid var(--border-color);">Portador de Creme (Ee)</td>
                            </tr>
                            <tr style="background: rgba(108, 92, 231, 0.02);">
                                <td style="padding: 0.75rem; border: 1px solid var(--border-color);">Particolor</td>
                                <td style="padding: 0.75rem; border: 1px solid var(--border-color);">Ancestral Manchado</td>
                                <td style="padding: 0.75rem; border: 1px solid var(--border-color);">Portador de Particolor (Ssp)</td>
                            </tr>
                        </table>
                    </div>

                    <div class="reference-section">
                        <h3>Locus A - Agouti (Colora√ß√£o)</h3>
                        <ul>
                            <li><strong>Ay:</strong> Sable (Dominante)</li>
                            <li><strong>Aw:</strong> Wolf Sable</li>
                            <li><strong>at:</strong> Tan Points</li>
                            <li><strong>a:</strong> Preto Recessivo (Mais Recessivo)</li>
                        </ul>
                    </div>

                    <div class="reference-section">
                        <h3>Locus K - Dominant Black (Padr√£o)</h3>
                        <ul>
                            <li><strong>K:</strong> Preto S√≥lido (Dominante)</li>
                            <li><strong>Kbr:</strong> Tigrado</li>
                            <li><strong>k:</strong> Agouti (Recessivo)</li>
                        </ul>
                    </div>

                    <div class="reference-section">
                        <h3>Locus E - Extension (M√°scara)</h3>
                        <ul>
                            <li><strong>Em:</strong> M√°scara Negra (Dominante)</li>
                            <li><strong>E:</strong> Extens√£o Normal</li>
                            <li><strong>e:</strong> Recessivo Vermelho (Epist√°tico)</li>
                        </ul>
                    </div>

                    <div class="reference-section">
                        <h3>Locus B - Brown (Cor)</h3>
                        <ul>
                            <li><strong>B:</strong> Preto (Dominante)</li>
                            <li><strong>b:</strong> Chocolate (Recessivo)</li>
                        </ul>
                    </div>

                    <div class="reference-section">
                        <h3>Locus D - Dilution (Dilui√ß√£o)</h3>
                        <ul>
                            <li><strong>D:</strong> Cor Densa (Dominante)</li>
                            <li><strong>d:</strong> Dilu√≠do - Azul/Lilac (Recessivo)</li>
                        </ul>
                    </div>

                    <div class="reference-section">
                        <h3>Locus I - Intensity (Intensidade)</h3>
                        <ul>
                            <li><strong>II:</strong> Vermelho Intenso (Domin√¢ncia Incompleta)</li>
                            <li><strong>Ii:</strong> Laranja Padr√£o (Intermedi√°rio)</li>
                            <li><strong>ii:</strong> Creme / Branco (Recessivo)</li>
                        </ul>
                    </div>

                    <div class="reference-section">
                        <h3>Locus M - Merle (Marmoreio)</h3>
                        <ul>
                            <li><strong>M:</strong> Merle Padr√£o</li>
                            <li><strong>Mh:</strong> Harlequin Merle</li>
                            <li><strong>Mc:</strong> Merle Cripto/Oculto</li>
                            <li><strong>m:</strong> N√£o-Merle</li>
                        </ul>
                    </div>

                    <div class="reference-section">
                        <h3>Locus S - Spotting (Marca√ß√£o)</h3>
                        <ul>
                            <li><strong>S:</strong> S√≥lido (Dominante)</li>
                            <li><strong>si:</strong> Irland√™s</li>
                            <li><strong>sp:</strong> Piebald/Parti</li>
                            <li><strong>sw:</strong> Branco Extremo (Recessivo)</li>
                        </ul>
                    </div>

                    <div class="reference-section">
                        <h3>Locus T - Ticking (Pintas)</h3>
                        <ul>
                            <li><strong>T:</strong> Com Sardas/Pintas (Dominante)</li>
                            <li><strong>t:</strong> Sem Pintas (Recessivo)</li>
                        </ul>
                    </div>

                    <div class="reference-section alert-box">
                        <h3>‚ö†Ô∏è Alertas de Sa√∫de Gen√©tica</h3>
                        <p><strong>Double Merle (M/M ou Mh/Mh ou similar):</strong> Cegueira, sordez, microftalmia</p>
                        <p><strong>Alopecia por Dilui√ß√£o (d/d):</strong> Queda de pelo cr√¥nica</p>
                    </div>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <p>Spitz Genetic Predictor v1.0 | Ferramenta educacional para criadores</p>
            <p id="offlineStatus"></p>
        </footer>
    </div>

    <script src="script.js"></script>
</body>
</html>